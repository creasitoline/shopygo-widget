<div id="modal-confirm" class="modal hidden">
    <div class="modal-box" style="text-align: center; max-width: 320px;">
        <i class="fa-solid fa-circle-exclamation" style="font-size: 3rem; color: var(--danger); margin-bottom: 15px;"></i>
        <h3>Sei sicuro?</h3>
        <p style="color: #666; font-size: 14px;">L'annuncio verr√† eliminato permanentemente dal database.</p>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button id="confirm-delete-btn" style="background: var(--danger);">ELIMINA</button>
            <button onclick="closeConfirm()" style="background: #eee; color: #333;">ANNULLA</button>
        </div>
    </div>
</div>

<script type="module">
    // ... (mantenere il resto del tuo script import e config) ...

    /* --- LOGICA ELIMINAZIONE RIPRISTINATA --- */
    let idDaEliminare = null;

    // Funzione che apre il modale personalizzato
    window.eliminaP = (id) => {
        idDaEliminare = id;
        document.getElementById('modal-confirm').classList.remove('hidden');
    };

    // Chiude il modale di conferma
    window.closeConfirm = () => {
        idDaEliminare = null;
        document.getElementById('modal-confirm').classList.add('hidden');
    };

    // Esegue l'eliminazione effettiva al click sul tasto rosso del modale
    document.getElementById('confirm-delete-btn').onclick = async () => {
        if (idDaEliminare) {
            import { getFirestore, doc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
            const db = getFirestore(); // Recupera istanza
            
            await deleteDoc(doc(db, "prodotti", idDaEliminare));
            closeConfirm();
            caricaProdotti(); // Ricarica la griglia
        }
    };

    /* --- FINE LOGICA ELIMINAZIONE --- */

    // Ricordati di rimuovere la vecchia funzione "window.eliminaP = async (id) => { ... }" 
    // che avevi nel tuo script precedente per evitare conflitti.
</script>
